!function(e){"use strict";tmpcoder.getToken(),e(document).on("click",".tmpcoder-load-more-button",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var a=e(this),o=e(".tmpcoder_load_more_text",a),r=o.html(),d=a.data("widget"),l=a.data("page-id"),s=localize.nonce,i=e(".elementor-element-"+d),n=a.data("class"),c=a.data("args"),p=a.data("layout"),m=a.data("template"),g=parseInt(a.data("page"))+1,u=void 0!==a.data("max-page")&&parseInt(a.data("max-page")),f=[],y=0,v="";if(a.attr("disabled",!0),void 0!==d&&void 0!==c){var h={},b={action:"load_more",class:n,args:c,page:g,page_id:l,widget_id:d,nonce:s,template_info:m};if("Spexo_Addons_Elementor\\Elements\\Woo_Product_Gallery"===b.class){var x={taxonomy:e(".tmpcoder-cat-tab li a.active",i).data("taxonomy"),field:"term_id",terms:e(".tmpcoder-cat-tab li a.active",i).data("id"),terms_tag:e(".tmpcoder-cat-tab li a.active",i).data("tagid")};if("true"===localStorage.getItem("tmpcoder-cat-tab")){localStorage.removeItem("tmpcoder-cat-tab");var C=2}else{var E=e(".tmpcoder-cat-tab li a.active",i),w=parseInt(E.data("page"));isNaN(w)&&(w=E.length?1:parseInt(e(".tmpcoder-load-more-button",i).data("page"))||1,E.data("page",1));var C=w+1}b.taxonomy=x,b.page=isNaN(C)?g:C}if("Spexo_Addons_Elementor\\Pro\\Elements\\Dynamic_Filterable_Gallery"===b.class&&(e(".dynamic-gallery-item-inner",i).each(function(){f.push(e(this).data("itemid"))}),y=e(".elementor-element-"+d+" .dynamic-gallery-category.active").data("termid")||0,v=e(".elementor-element-"+d+" .dynamic-gallery-category.active").data("taxonomy")||"",b.page=1,b.exclude_ids=JSON.stringify(f),b.active_term_id=y,b.active_taxonomy=v),String(c).split("&").forEach(function(e){var t=String(e).split("=");h[t[0]]=t[1]}),"rand"===h.orderby){var _=e(".tmpcoder-grid-post");if(_.length){var P=[];_.each(function(){P.push(e(this).data("id"))}),b.post__not_in=P}}a.addClass("button--loading"),o.html(localize.i18n.loading),e.ajax({url:localize.ajaxurl,type:"post",data:b,success:function(t){var d=e(t);if(a.removeAttr("disabled"),d.hasClass("no-posts-found")||0===d.length)"Spexo_Addons_Elementor\\Elements\\Woo_Product_Gallery"===b.class?(a.removeClass("button--loading").addClass("hide-load-more"),o.html(r),a.parent().hasClass("tmpcoder-infinity-scroll")&&a.parent().remove()):"Spexo_Addons_Elementor\\Pro\\Elements\\Dynamic_Filterable_Gallery"===b.class?(a.removeClass("button--loading"),o.html(r),$(a)):a.remove();else{if("TMPCODER\\Widgets\\Product_Grid"===b.class){if(d=d.filter("li"),e(".tmpcoder-product-grid .products",i).append(d),"masonry"===p){var l="tmpcoder-product-"+Date.now(),s=e(".tmpcoder-product-grid .products",i).isotope();s.isotope("appended",d).isotope("layout"),s.imagesLoaded().progress(function(){s.isotope("layout")}),d.find(".woocommerce-product-gallery").addClass(l).addClass("tmpcoder-new-product"),e(".woocommerce-product-gallery."+l,i).each(function(){e(this).wc_product_gallery()})}else{var n="tmpcoder-product-"+Date.now();d.find(".woocommerce-product-gallery").addClass(n).addClass("tmpcoder-new-product"),e(".woocommerce-product-gallery."+n,i).each(function(){e(this).wc_product_gallery()})}g>=u&&a.remove()}else if(e(".tmpcoder-post-appender",i).append(d),"masonry"===p){var s=e(".tmpcoder-post-appender",i).isotope();s.isotope("appended",d).isotope("layout"),s.imagesLoaded().progress(function(){s.isotope("layout")})}if(a.removeClass("button--loading"),o.html(r),"Spexo_Addons_Elementor\\Elements\\Woo_Product_Gallery"===b.class&&e(".tmpcoder-cat-tab li a.active",i).length?e(".tmpcoder-cat-tab li a.active",i).data("page",C):a.data("page",g),"Spexo_Addons_Elementor\\Pro\\Elements\\Dynamic_Filterable_Gallery"===b.class){var c=e(d[0]);c.hasClass("found_posts")&&c.text()-h.posts_per_page<1&&$(a)}else u&&b.page>=u&&a.addClass("hide-load-more")}},error:function(e){console.log(e)}})}function $(e){var t=e.closest(".tmpcoder-filter-gallery-wrapper").find(".dynamic-gallery-category.active"),a=t.data("filter"),o=t.siblings().not(".no-more-posts");e.addClass("hide"),t.addClass("no-more-posts"),1===o.length&&"*"===o.data("filter")&&o.addClass("no-more-posts"),"*"===a&&t.siblings().addClass("no-more-posts")}}),e(window).on("scroll",function(){var t=e(".tmpcoder-infinity-scroll");if(t.length<1)return!1;e.each(t,function(t,a){var o=e(a),r=o.data("offset"),d=o.offset().top,l=d+o.outerHeight()-r,s=e(window).scrollTop(),i=s+e(window).height()-r;l>s&&d<i&&e(".tmpcoder-load-more-button",o).trigger("click")})})}(jQuery);